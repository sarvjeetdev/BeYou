{% extends 'base.html' %}

{% block content %}
<div class="container">
    <h2>My Friends</h2>

    {% if friends %}
        <div class="row">
            {% for friend in friends %}
                <div class="col-md-4 mb-3">
                    <div class="card">
                        {% if friend.profile_picture %}
                            <img src="{{ friend.profile_picture.url }}" class="card-img-top" alt="{{ friend.username }}" style="height: 150px; object-fit: cover;">
                        {% else %}
                            <div class="card-img-top bg-secondary text-white d-flex justify-content-center align-items-center" style="height: 150px;">
                                <h3>{{ friend.username|first|upper }}</h3>
                            </div>
                        {% endif %}
                        <div class="card-body">
                            <h5 class="card-title">{{ friend.username }}</h5>
                            <p class="card-text text-muted">{{ friend.email }}</p>
                            <a href="{% url 'start_conversation' friend.id %}" class="btn btn-primary">Message</a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="alert alert-info">
            You don't have any friends yet. <a href="{% url 'search_users' %}">Find people</a> to add as friends.
        </div>
    {% endif %}
</div>
{% endblock %}